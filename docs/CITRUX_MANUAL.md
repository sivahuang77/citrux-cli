# 🍊 Citrux CLI：現代開發者的智慧終端指揮中心

歡迎使用 **Citrux CLI**
—— 一款專為提升開發者終端體驗而設計的原創人工智慧命令行介面（TUI）。Citrux
CLI 將最強大的大型語言模型（LLM）深度整合進您的本地開發環境，提供從代碼重構、系統自動化到複雜上下文分析的全方位支援。

---

## 🚀 快速入門

### 1. 安裝環境

Citrux CLI 運行於 Node.js 環境，支援 macOS (darwin)、Linux 與 Windows。

透過 GitHub 直接安裝最新版本：

```bash
npm install -g https://github.com/sivahuang77/citrux-cli.git
```

### 2. 初始配置

首次啟動時，輸入以下指令進入模型配置介面：

```bash
/model
```

在互動式視窗中，您可以選擇供應商（DeepSeek, OpenAI, Ollama,
Google 等）並安全地配置您的 API 金鑰。

### 3. 開啟對話

直接在終端輸入您的開發需求，例如：

> "幫我寫一個 Python 腳本，用來自動壓縮專案中的圖片檔案，並保留目錄結構。"

---

## 🧠 核心架構理念

Citrux CLI 的設計核心圍繞著 **「深度上下文理解」** 與 **「工具化行動」**
兩大支柱。

### 1. 層級式上下文記憶 (Hierarchical Memory)

Citrux 擁有一套獨特的記憶搜尋算法。它會自動在您的工作目錄及其父目錄中搜尋名為
`CITRUX.md` 的特殊檔案。

- **全域記憶**：儲存於 `~/.citrux/`，適用於您所有的專案開發習慣。
- **專案記憶**：位於專案根目錄，定義架構規範。
- **模組記憶**：位於子目錄，針對特定模組提供技術細節。

### 2. 多模型協作引擎 (Multi-LLM SSE Engine)

我們不將使用者綁定於單一模型。Citrux 內建高效的 SSE（Server-Sent
Events）解析引擎，能與多種 OpenAI 兼容 API 進行高速流式通訊，並在通訊過程中即時處理複雜的工具調用邏輯。

---

## 🛠️ 核心功能詳解

### 📂 上下文管理器 (Context Manager)

這是 Citrux CLI 的殺手鐧功能。透過 `/memory`
系列指令，您可以精確控制 AI 正在觀察哪些資訊。

- **互動管理**：使用 `/memory manage`
  開啟 TUI 管理視窗，透過空白鍵快速勾選或取消特定的 `CITRUX.md` 檔案路徑。
- **即時整理**：當您修改了專案結構，執行
  `/memory refresh`，Citrux 會瞬間重新掃描並更新其「大腦」中的專案視圖。

### 🤖 自動化代理工具箱 (Agentic Tools)

AI 不再只是空談，Citrux 授權 AI 執行以下操作（均需經過您的確認）：

- **精密編輯 (`replace`)**：基於上下文進行精確的代碼段替換，而非簡單的全檔覆蓋。
- **終端模擬 (`shell`)**：AI 可以擬定編譯、測試或部署指令，並在您的授權下於終端執行。
- **結構檢索 (`ls`, `grep`, `glob`)**：在大規模代碼庫中快速定位邏輯漏洞。
- **智慧搜尋 (`web_search`)**：當遇到未知的報錯時，AI 會主動搜尋 StackOverflow 或官方文件。

### 💻 Citrux Companion (IDE 整合)

內建針對 VS Code 深度優化的協作插件。

- **變數同步**：自動同步 IDE 的環境上下文。
- **跨視窗操作**：在終端下達指令，代碼直接反映在編輯器中。

---

## ⌨️ 指令參考手冊

### 核心管理指令

| 指令        | 參數      | 功能說明                                     |
| :---------- | :-------- | :------------------------------------------- |
| `/model`    | 無        | 開啟模型與供應商切換視窗。                   |
| `/settings` | 無        | 配置 UI 主題（橘色動力）、字體、安全性等級。 |
| `/help`     | [command] | 顯示說明文件或特定指令的詳細用法。           |

### 上下文與記憶指令

| 指令                 | 功能說明                                          |
| :------------------- | :------------------------------------------------ |
| `/memory manage`     | **(推薦)** 打開視覺化選單，管理啟用的上下文檔案。 |
| `/memory list`       | 以條列方式顯示目前所有生效的 `CITRUX.md` 路徑。   |
| `/memory refresh`    | 強制記憶同步，適用於本地檔案大規模變動後。        |
| `/memory add <text>` | 手動向 Citrux 的短期記憶中加入一條事實。          |

### 對話與工作流指令

| 指令               | 功能說明                                         |
| :----------------- | :----------------------------------------------- |
| `/chat reset`      | 清空目前的對話歷史，重置 AI 的對話狀態。         |
| `/chat save [tag]` | 將目前的對話工作流儲存為一個標記，方便日後追溯。 |
| `/tools`           | 列出目前 Citrux 獲得授權的所有底層工具及其權限。 |

---

## 📝 專案配置指南：`CITRUX.md`

要讓 Citrux CLI 發揮 100% 的戰力，建議在專案中加入
`CITRUX.md`。這是一個標準的 Markdown 檔案，Citrux 會優先讀取其中的標題區塊。

**推薦範本：**

```markdown
# 🍊 專案戰術板

- **技術棧**：React + TypeScript + Vite
- **風格規範**：使用 Functional Components，優先使用 Tailwind。
- **測試入口**：`npm run test:watch`

# ⚠️ 禁忌與規範

- 嚴禁在代碼中提交任何以 `sk-` 開頭的字串。
- 所有的資料庫操作必須經過 `dbService.ts` 封裝。
```

---

## 🔒 安全、隱私與存放路徑

Citrux CLI 堅持 **「隱私守護、本地控制」** 的原則：

- **資料存放**：所有配置、Session 歷史與 API 金鑰均加密儲存於本地
  `$HOME/.citrux/`。
- **沙盒機制**：對於敏感的 shell 指令，Citrux 支援在受限的沙盒環境中預執行。
- **日誌審計**：所有的 AI 行為均記錄於 `~/.citrux/logs/`，隨時可查。

---

🍊 **Citrux CLI - Fresh Code, Deep Logic.**  
_立即啟動您的終端，感受橘色的開發動力。_
